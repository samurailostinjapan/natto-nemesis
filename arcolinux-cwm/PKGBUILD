# Maintainer: Brian Bidulock <bidulock@openss7.org>
# Contributor: Mariusz Libera <mariusz.libera@gmail.com>
# Contributor: Anton Bazhenov <anton.bazhenov at gmail>
# Contributor: xaw <xawl.ch@gmail.com>
pkgname=arcolinux-cwm
pkgver=6.7
pkgrel=7
pkgdesc="OpenBSD fork of calmwm, a clean and lightweight window manager - changed for ArcoLinux"
arch=('i686' 'x86_64')
url="http://www.openbsd.org/cgi-bin/man.cgi?query=cwm&sektion=1"
license=('BSD')
depends=('libxft' 'libxrandr')
changelog=cwm.changelog
conflicts=('cwm')
makedepends=('git')
source=("$pkgname::git+https://github.com/chneukirchen/cwm.git#tag=v${pkgver}" 'cwm.desktop' 'cwm-autostart.sh')
sha256sums=('SKIP'
            'd06d23448de42e9583180204bf38ccaeb92a8a5c03cc7103eb9d15b9e8d2eab3'
            'b8262c4ae53a25f0e4edebcbeccd90d728c8063db2b0f314c6ee0c703129df8c')

build() {
  cd $pkgname
  make
}

package() {
  cd $pkgname
  make DESTDIR="$pkgdir" PREFIX=/usr install
install -Dm755 "${srcdir}/cwm.desktop" "${pkgdir}/usr/share/xsessions/cwm.desktop"
  install -Dm755 "${srcdir}/cwm-autostart.sh" "${pkgdir}/usr/local/bin/cwm-autostart.sh"
  install -Dm755 <(sed -n '/Copyright/,/PERFORMANCE/p' <calmwm.c) "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
